<!DOCTYPE html>
<html lang="zh-cn">

<head>

  
  <meta charset="UTF-8">
  <title>
    玩转canvas | wuxingtao Blog
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="https://wuxingtao.github.io/posts/play-canvas/" />

  
  
  
  
  <link rel="stylesheet" href="https://fonts.loli.net/icon?family=Material+Icons">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/ocean.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://wuxingtao.github.io/css/index.css">
  
  <link href="https://wuxingtao.github.io/index.xml" rel="alternate" type="application/rss+xml" title="wuxingtao Blog" />
  <link href="https://wuxingtao.github.io/index.xml" rel="feed" type="application/rss+xml" title="wuxingtao Blog" />

  
  <link href="https://wuxingtao.github.io/favicon.ico" rel="shortcut icon">

  <script>
    window.baseURL = 'https:\/\/wuxingtao.github.io';
  </script>
</head>







<body>
  <div class="navbar-fixed">
    <nav class="navbar">
      <div class="nav-container container">
        <div class="nav-wrapper inner">
          <a href="javascript:void(0)" data-activates="sidebar" class="button-collapse hide-on-large-only">
            <i class="material-icons">menu</i>
          </a>
          <a href="https://wuxingtao.github.io" class="brand-logo">
            <i class="material-icons hide-on-med-and-down">restaurant_menu</i>
            wuxingtao Blog
          </a>
          
          <ul class=" nav-menu tabs tabs-transparent hide-on-med-and-down">
            
            <li class="tab">
              <a href="https://wuxingtao.github.io/" class=''>
                Home
              </a>
            </li>
            
            <li class="tab">
              <a href="https://wuxingtao.github.io/archive/" class=''>
                Archive
              </a>
            </li>
            
            <li class="tab">
              <a href="https://wuxingtao.github.io/about/" class=''>
                About
              </a>
            </li>
            
          </ul>
          

          <form class="nav-form hide-on-small-and-down">
            <div class="form-group">
              <i class="material-icons">search</i>
              <input type='text' placeholder="输入搜索关键字" />
            </div>
            <div class="form-popout">
              <div class="search-result">
                <label>暂无搜索结果</label>
                <ul>
                </ul>
              </div>
            </div>
          </form>


          <ul class=" nav-menu apps">
            
            <li>
              <a class="search-btn hide-on-med-and-up" href='#search-panel'>
                <i class="material-icons">search</i>
              </a>
            </li>
            <li>
              <a class="term-btn hide-on-small-and-down" href='#term-panel'>
                <i class="material-icons">apps</i>
              </a>
            </li>
            <li>
              <a class="rss-btn hide-on-small-and-down" href='https://wuxingtao.github.io/index.xml' target="_blank">
                <i class="material-icons">rss_feed</i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>

  
  <div class="mobile-search hide-on-med-and-up">
  <div class="header">
    
    <i class="material-icons">search</i>
    <input type='text' placeholder="输入搜索关键字" />
    <i class="material-icons mobile-search-close">cancel</i>
  </div>
  <div class="content">
    <label>暂无搜索结果</label>
    <ul></ul>
  </div>
</div>
  

  <div class="taxonomy">
    <div class="container">
      <div class="inner">
        <div class="taxonomy-panel">
          
          <div class='group'>
            <label>Category</label>
            <ul>
                
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/categories/private'> private
                  <span class="badge">1</span>
                </a>
              </li>
              
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/categories/tao'> tao
                  <span class="badge">1</span>
                </a>
              </li>
              
            </ul>
          </div>
          
          <div class='group'>
            <label>Tag</label>
            <ul>
                
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/tags/development'> development
                  <span class="badge">1</span>
                </a>
              </li>
              
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/tags/go'> go
                  <span class="badge">1</span>
                </a>
              </li>
              
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/tags/golang'> golang
                  <span class="badge">1</span>
                </a>
              </li>
              
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/tags/hugo'> hugo
                  <span class="badge">1</span>
                </a>
              </li>
              
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/tags/templates'> templates
                  <span class="badge">1</span>
                </a>
              </li>
              
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/tags/theme'> theme
                  <span class="badge">1</span>
                </a>
              </li>
              
              <li>
                <a class="btn btn-secondary" href='https://wuxingtao.github.io/tags/themes'> themes
                  <span class="badge">1</span>
                </a>
              </li>
              
            </ul>
          </div>
           
        </div>
      </div>
    </div>
  </div>

  
  <ul class="side-nav" id="sidebar">
    
    <li>
      <a href="https://wuxingtao.github.io/" class=''>
        Home
      </a>
    </li>
    
    <li>
      <a href="https://wuxingtao.github.io/archive/" class=''>
        Archive
      </a>
    </li>
    
    <li>
      <a href="https://wuxingtao.github.io/about/" class=''>
        About
      </a>
    </li>
    
    <li>
      <a class="term-btn-mobile hide-on-med-only" href='https://wuxingtao.github.io/categories/'>
        Categories
      </a>
    </li>
    <li>
      <a class="term-btn-mobile hide-on-med-only" href='https://wuxingtao.github.io/tags/'>
        Tags
      </a>
    </li>
    <li>
      <a class="rss-btn-mobile hide-on-med-only" href='https://wuxingtao.github.io/index.xml' target="_blank">
        Rss
      </a>
    </li>
  </ul>
  





<main id="single" role="main" class="main-panel">
  <div class="page-content">
    <div class="container container-ex">
      <div class="inner">
        <section class="post-wrapper">
          
          <div class="toc-panel">
            <nav id="TableOfContents">
<ul>
<li><a href="#前言">前言</a></li>
<li><a href="#基本知识">基本知识</a></li>
<li><a href="#清除矩形区域-context-clearrect-x-y-width-height">清除矩形区域 context.clearRect(x,y,width,height)</a></li>
<li><a href="#圆弧context-arc-x-y-radius-starangle-endangle-anticlockwise">圆弧context.arc(x, y, radius, starAngle,endAngle, anticlockwise)</a></li>
<li><a href="#路径-context-beginpath-context-closepath">路径  context.beginPath()    context.closePath()</a></li>
<li><a href="#绘制线段-context-moveto-x-y-context-lineto-x-y">绘制线段 context.moveTo(x,y)  context.lineTo(x,y)</a></li>
<li><a href="#绘制贝塞尔曲线-贝济埃-bezier-context-beziercurveto-cp1x-cp1y-cp2x-cp2y-x-y">绘制贝塞尔曲线（贝济埃、bezier） context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)</a></li>
<li><a href="#径向渐变-发散-var-rg-context-createradialgradient-xstart-ystart-radiusstart-xend-yend-radiusend">径向渐变（发散）var rg=context.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd)</a></li>
<li><a href="#图形变形">图形变形</a></li>
</ul>
</nav>
          </div>
          
          <div class="post reveal ">
            <div class="card">
              <section class="breadcrumb-root">
  <div class="breadcrumbs" role="navigation" aria-label="breadcrumbs navigation">
     

    <a class="breadcrumb" href="https://wuxingtao.github.io">
      <i class="material-icons">location_on</i>Home</a>
      
    
        
    
      
    
        
    
      
    <span class="breadcrumb">玩转canvas</span>

        
    
      
  </div>
</section>
              
              <div class="card-header postinfo">
                <span class="card-title">玩转canvas </span>
              </div>
              <div class="card-header date">
                
                <div class="group">
                  <i class="material-icons">flag</i>
                  <time>创建：2019年02月13日
                  </time>
                </div>
                
                

              </div>
              
              <div class="card-content">

                <article class="article">
                  

<p>[toc]</p>

<h1 id="前言">前言</h1>

<pre><code> &lt;canvas&gt;&lt;/canvas&gt;是html5出现的新标签，像所有的dom对象一样它有自己本身的属性、方法和事件，其中就有绘图的方法，js能够调用它来进行绘图 ，最近在研读《html5与css3权威指南》下面对其中最好玩的canvas的学习做下读书笔记与实验。

 温馨提示：以下所有实验请使用最新版的opera
</code></pre>

<h1 id="基本知识">基本知识</h1>

<p>context:一直觉得这个翻译成“上下文”真够蛋疼的，context是一个封装了很多绘图功能的对象，获取这个对象的方法是
<code>var context =canvas.getContext(&quot;2d&quot;);</code>
 也许这个2d勾起了大家的无限遐想，但是很遗憾的告诉你html5还只是个少女，不提供3d服务。</p>

<blockquote>
<p>canvas元素绘制图像的时候有两种方法，分别是:</p>

<pre><code> context.fill()//填充
 context.stroke()//绘制边框
</code></pre>
</blockquote>

<p>style:在进行图形绘制前，要设置好绘图的样式</p>

<pre><code>context.fillStyle//填充的样式
context.strokeStyle//边框样式
context.lineWidth//图形边框宽度
</code></pre>

<blockquote>
<p>颜色的表示方式:</p>
</blockquote>

<p>直接用颜色名称:&ldquo;red&rdquo; &ldquo;green&rdquo; &ldquo;blue&rdquo;</p>

<p>十六进制颜色值: &ldquo;#EEEEFF&rdquo;</p>

<p>rgb(1-255,1-255,1-255)</p>

<p>rgba(1-255,1-255,1-255,透明度)</p>

<pre><code> 和GDI是如此的相像，所以用过GDI的朋友应该很快就能上手
</code></pre>

<p>#绘制矩形  context.fillRect(x,y,width,height)  strokeRect(x,y,width,height)</p>

<ul>
<li><p>x:矩形起点横坐标（坐标原点为canvas的左上角，当然确切的来说是原始原点，后面写到变形的时候你就懂了，现在暂时不用关系）</p></li>

<li><p>y:矩形起点纵坐标</p></li>

<li><p>width:矩形长度</p></li>

<li><p>height:矩形高度</p>

<pre><code>function draw21(id) {
        var canvas = document.getElementById(id)
        if (canvas == null)
            return false;
        var context = canvas.getContext(&quot;2d&quot;);
        //实践表明在不设施fillStyle下的默认fillStyle=black
        context.fillRect(0, 0, 100, 100);
        //实践表明在不设施strokeStyle下的默认strokeStyle=black
        context.strokeRect(120, 0, 100, 100);
 
        //设置纯色
        context.fillStyle = &quot;red&quot;;
        context.strokeStyle = &quot;blue&quot;;
        context.fillRect(0, 120, 100, 100);
        context.strokeRect(120, 120, 100, 100);
 
        //设置透明度实践证明透明度值&gt;0,&lt;1值越低，越透明，值&gt;=1时为纯色，值&lt;=0时为完全透明
        context.fillStyle = &quot;rgba(255,0,0,0.2)&quot;;
        context.strokeStyle = &quot;rgba(255,0,0,0.2)&quot;;
        context.fillRect(240,0 , 100, 100);
        context.strokeRect(240, 120, 100, 100);
    }
</code></pre></li>
</ul>

<h1 id="清除矩形区域-context-clearrect-x-y-width-height">清除矩形区域 context.clearRect(x,y,width,height)</h1>

<ul>
<li><p>x:清除矩形起点横坐标</p></li>

<li><p>y:清除矩形起点纵坐标</p></li>

<li><p>width:清除矩形长度</p></li>

<li><p>height:清除矩形高度</p></li>
</ul>

<pre><code>function draw22(id) {
            var canvas = document.getElementById(id)
            if (canvas == null)
                return false;
            var context = canvas.getContext(&quot;2d&quot;);
            //实践表明在不设施fillStyle下的默认fillStyle=black
            context.fillRect(0, 0, 100, 100);
            //实践表明在不设施strokeStyle下的默认strokeStyle=black
            context.strokeRect(120, 0, 100, 100);
 
            //设置纯色
            context.fillStyle = &quot;red&quot;;
            context.strokeStyle = &quot;blue&quot;;
            context.fillRect(0, 120, 100, 100);
            context.strokeRect(120, 120, 100, 100);
 
            //设置透明度实践证明透明度值&gt;0,&lt;1值越低，越透明，值&gt;=1时为纯色，值&lt;=0时为完全透明
            context.fillStyle = &quot;rgba(255,0,0,0.2)&quot;;
            context.strokeStyle = &quot;rgba(255,0,0,0.2)&quot;;
            context.fillRect(240, 0, 100, 100);
            context.strokeRect(240, 120, 100, 100);
            context.clearRect(50, 50, 240, 120);
        }
</code></pre>

<h1 id="圆弧context-arc-x-y-radius-starangle-endangle-anticlockwise">圆弧context.arc(x, y, radius, starAngle,endAngle, anticlockwise)</h1>

<ul>
<li><p>x:圆心的x坐标</p></li>

<li><p>y:圆心的y坐标</p></li>

<li><p>straAngle:开始角度</p></li>

<li><p>endAngle:结束角度</p></li>

<li><p>anticlockwise:是否逆时针（true）为逆时针，(false)为顺时针</p>

<p>ps：经过试验证明书本上ture是顺时针，false是逆时针是错误的，而且无论是逆时针还是顺时针，角度都沿着顺时针扩大，如下图：</p></li>
</ul>

<pre><code>function draw0(id) {
            var canvas = document.getElementById(id);
            if (canvas == null) {
                return false;
            }
            var context = canvas.getContext('2d');
            context.beginPath();
            context.arc(200, 150, 100, 0, Math.PI * 2, true);
            //不关闭路径路径会一直保留下去，当然也可以利用这个特点做出意想不到的效果
            context.closePath();
            context.fillStyle = 'rgba(0,255,0,0.25)';
            context.fill();
        }
</code></pre>

<p>一不小心画了小日本的国旗&hellip;赶紧调下颜色和大小，绿色倒是挺合适的~</p>

<h1 id="路径-context-beginpath-context-closepath">路径  context.beginPath()    context.closePath()</h1>

<p>细心的朋友会发现上面的画圆并不单单是直接用arc还用到了context的 beginPath   和closePath方法，参考书不愧是参考书，例子给得太简单了，实话说一开始我凌乱了，耐心下来做了几个实验才舒缓蛋疼的心情</p>

<pre><code>实验代码如下，通过分别注释closePath 和beginPath看fill stoke 和fill stroke结合下画出来的两个1/4弧线达到实验效果
</code></pre>

<pre><code>function draw23(id) {
            var canvas = document.getElementById(id);
            if (canvas == null) {
                return false;
            }
            var context = canvas.getContext('2d');
            var n = 0;
 
            //左侧1/4圆弧
            context.beginPath();
            context.arc(100, 150, 50, 0, Math.PI/2 , false);
            context.fillStyle = 'rgba(255,0,0,0.25)';
            context.fill();
            context.strokeStyle = 'rgba(255,0,0,0.25)'
            context.closePath();
            context.stroke();
 
            //右侧1/4圆弧
            context.beginPath();
            context.arc(300, 150, 50, 0, Math.PI/2 , false);
            context.fillStyle = 'rgba(255,0,0,0.25)';
            context.fill();
            context.strokeStyle = 'rgba(255,0,0,0.25)';
            context.closePath();
            context.stroke();
        }
</code></pre>

<p>得出的结论有：*号为重点</p>

<pre><code>1、系统默认在绘制第一个路径的开始点为beginPath

2、如果画完前面的路径没有重新指定beginPath，那么画第其他路径的时候会将前面最近指定的beginPath后的全部路径重新绘制

3、每次调用context.fill（）的时候会自动把当次绘制的路径的开始点和结束点相连，接着填充封闭的部分

ps：书本的结论是   如果没有closePath那么前面的路劲会保留，实验证明正确的结论是 如果没有重新beginPath那么前面的路劲会保留

ps1：如果你真心凌乱了，那么记住每次画路径都在前后加context.beginPath()   和context.closePath()就行
</code></pre>

<h1 id="绘制线段-context-moveto-x-y-context-lineto-x-y">绘制线段 context.moveTo(x,y)  context.lineTo(x,y)</h1>

<ul>
<li><p>x:x坐标</p></li>

<li><p>y:y坐标</p></li>

<li><p>每次画线都从moveTo的点到lineTo的点，</p></li>

<li><p>如果没有moveTo那么第一次lineTo的效果和moveTo一样，</p></li>

<li><p>每次lineTo后如果没有moveTo，那么下次lineTo的开始点为前一次lineTo的结束点</p></li>
</ul>

<pre><code>function draw8(id) {
            var canvas = document.getElementById(id);
            if (canvas == null)
                return false;
            var context = canvas.getContext(&quot;2d&quot;);
            //context.beginPath();
            context.strokeStyle = &quot;rgb(250,0,0)&quot;;
            context.fillStyle = &quot;rgb(250,0,0)&quot;
            //实验证明第一次lineTo的时候和moveTo功能一样
            context.lineTo(100, 100);
            //之后的lineTo会以上次lineTo的节点为开始
            context.lineTo(200, 200);
            context.lineTo(200, 100);
            context.moveTo(200, 50);
            context.lineTo(100,50);
            context.stroke();
        }
</code></pre>

<p>下面给出书本的例子，一朵绿色的菊花，涉及数学，不多解析，有兴趣的自己研究</p>

<pre><code>function draw1(id) {
            var canvas = document.getElementById(id);
            if (canvas == null)
                return false;
            var context = canvas.getContext(&quot;2d&quot;);
            context.fillStyle = &quot;#EEEEFF&quot;;
            context.fillRect(0, 0, 400, 300);
            var n = 0;
            var dx = 150;
            var dy = 150;
            var s = 100;
            context.beginPath();
            context.fillStyle = 'rgb(100,255,100)';
            context.strokeStyle = 'rgb(0,0,100)';
            var x = Math.sin(0);
            var y = Math.cos(0);
            var dig = Math.PI / 15 * 11;
            for (var i = 0; i &lt; 30; i++) {
                var x = Math.sin(i * dig);
                var y = Math.cos(i * dig);
                context.lineTo(dx + x * s, dy + y * s);
            }
            context.closePath();
            context.fill();
            context.stroke();

        }
</code></pre>

<h1 id="绘制贝塞尔曲线-贝济埃-bezier-context-beziercurveto-cp1x-cp1y-cp2x-cp2y-x-y">绘制贝塞尔曲线（贝济埃、bezier） context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)</h1>

<p>绘制二次样条曲线 context.quadraticCurveTo(qcpx,qcpy,qx,qy)</p>

<ul>
<li><p>cp1x:第一个控制点x坐标</p></li>

<li><p>cp1y:第一个控制点y坐标</p></li>

<li><p>cp2x:第二个控制点x坐标</p></li>

<li><p>cp2y:第二个控制点y坐标</p></li>

<li><p>x:终点x坐标</p></li>

<li><p>y:终点y坐标</p></li>

<li><p>qcpx:二次样条曲线控制点x坐标</p></li>

<li><p>qcpy:二次样条曲线控制点y坐标</p></li>

<li><p>qx:二次样条曲线终点x坐标</p></li>

<li><p>qy:二次样条曲线终点y坐标</p></li>
</ul>

<pre><code>function draw24(id) {
            var canvas = document.getElementById(id);
            if (canvas == null) {
                return false;
            }
            var context = canvas.getContext(&quot;2d&quot;);

            context.moveTo(50, 50);
            context.bezierCurveTo(50, 50,150, 50, 150, 150);
            context.stroke();
            context.quadraticCurveTo(150, 250, 250, 250);
            context.stroke();
        }
</code></pre>

<p>下面给出书本的例子，一朵扭曲的绿色菊花&hellip;编书这哥们对菊花情有独钟啊- -</p>

<pre><code>function draw2(id) {
            var canvas = document.getElementById(id);
            if (canvas == null) {
                return false;
            }
            var context = canvas.getContext(&quot;2d&quot;);
            context.fillStyle = &quot;#EEEFF&quot;;
            context.fillRect(0, 0, 400, 300);
            var n = 0;
            var dx = 150;
            var dy = 150;
            var s = 100;
            context.beginPath();
            context.globalCompositeOperation = 'and';
            context.fillStyle = 'rgb(100,255,100)';
            var x = Math.sin(0);
            var y = Math.cos(0);
            var dig = Math.PI / 15 * 11;
            context.moveTo(dx, dy);
            for (var i = 0; i &lt; 30; i++) {
                var x = Math.sin(i * dig);
                var y = Math.cos(i * dig);
                context.bezierCurveTo(dx + x * s, dy + y * s - 100, dx + x * s + 100, dy + y * s, dx + x * s, dy + y * s);
            }
            context.closePath();
            context.fill();
            context.stroke();
        }
</code></pre>

<p>关于贝塞尔曲线可以参考百度百科和<a href="http://blog.csdn.net/zhangci226/article/details/4018449这篇文章">http://blog.csdn.net/zhangci226/article/details/4018449这篇文章</a></p>

<p># 线性渐变 var lg= context.createLinearGradient(xStart,yStart,xEnd,yEnd), 线性渐变颜色lg.addColorStop(offset,color)</p>

<ul>
<li><p>xstart:渐变开始点x坐标</p></li>

<li><p>ystart:渐变开始点y坐标</p></li>

<li><p>xEnd:渐变结束点x坐标</p></li>

<li><p>yEnd:渐变结束点y坐标</p></li>

<li><p>offset:设定的颜色离渐变结束点的偏移量(0~1)</p></li>

<li><p>color:绘制时要使用的颜色
给出书本偏移量的解析图，从图可以看出线性渐变可以是两种以上颜色的渐变</p></li>
</ul>

<pre><code>function draw25(id) {
            var canvas = document.getElementById(id);
            if (canvas == null)
                return false;
            var context = canvas.getContext('2d');
            var g1 = context.createLinearGradient(0, 0, 0, 300);

            g1.addColorStop(0, 'rgb(255,0,0)'); //红  
            g1.addColorStop(0.5, 'rgb(0,255,0)');//绿
            g1.addColorStop(1, 'rgb(0,0,255)'); //蓝

            //可以把lg对象理解成GDI中线性brush
            context.fillStyle = g1;
            //再用这个brush来画正方形
            context.fillRect(0, 0, 400, 300);  
        }
</code></pre>

<h1 id="径向渐变-发散-var-rg-context-createradialgradient-xstart-ystart-radiusstart-xend-yend-radiusend">径向渐变（发散）var rg=context.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd)</h1>

<p>径向渐变（发散）颜色rg.addColorStop(offset,color)</p>

<ul>
<li><p>xStart:发散开始圆心x坐标</p></li>

<li><p>yStart:发散开始圆心y坐标</p></li>

<li><p>radiusStart:发散开始圆的半径</p></li>

<li><p>xEnd:发散结束圆心的x坐标</p></li>

<li><p>yEnd:发散结束圆心的y坐标</p></li>

<li><p>radiusEnd:发散结束圆的半径</p></li>

<li><p>offset:设定的颜色离渐变结束点的偏移量(0~1)</p></li>

<li><p>color:绘制时要使用的颜色</p></li>
</ul>

<p>书本并没有给出发散偏移量的图，特地画了幅：</p>

<p>下面给出两个实验</p>

<pre><code>function draw26(id) {
            //同一个圆心画球型
            /*var canvas = document.getElementById(id);
            if (canvas == null)
                return false;
            var context = canvas.getContext('2d');
            var g1 = context.createRadialGradient(200, 150, 0, 200, 150, 100);
            g1.addColorStop(0.1, 'rgb(255,0,0)');  
            g1.addColorStop(1, 'rgb(50,0,0)');
            context.fillStyle = g1;
            context.beginPath();
            context.arc(200, 150, 100, 0, Math.PI * 2, true);
            context.closePath();
            context.fill();*/
          
            //不同圆心看径向渐变模型
            var canvas = document.getElementById(id);
            if (canvas == null)
            return false;
            var context = canvas.getContext('2d');
            var g1 = context.createRadialGradient(100, 150, 10, 300, 150, 50);
            g1.addColorStop(0.1, 'rgb(255,0,0)');
            g1.addColorStop(0.5, 'rgb(0,255,0)');
            g1.addColorStop(1, 'rgb(0,0,255)');
            context.fillStyle = g1;
            context.fillRect(0, 0, 400, 300);
   
        }
</code></pre>

<h1 id="图形变形">图形变形</h1>

<p>1、平移context.translate(x,y)</p>

<pre><code>x:坐标原点向x轴方向平移x

y:坐标原点向y轴方向平移y
</code></pre>

<p>2、缩放context.scale(x,y)</p>

<pre><code>x:x坐标轴按x比例缩放

y:y坐标轴按y比例缩放
</code></pre>

<p>3、旋转context.rotate(angle)</p>

<ul>
<li>angle:坐标轴旋转x角度（角度变化模型和画圆的模型一样）</li>
</ul>

<pre><code>function draw5(id) {
            var canvas = document.getElementById(id);
            if (canvas == null)
                return false;


            var context = canvas.getContext(&quot;2d&quot;);
            context.save(); //保存了当前context的状态
            context.fillStyle = &quot;#EEEEFF&quot;;
            context.fillRect(0, 0, 400, 300);

            context.fillStyle = &quot;rgba(255,0,0,0.1)&quot;;
            //平移 缩放 旋转  1 2 3        
            context.translate(100, 100);
            context.scale(0.5, 0.5);
            context.rotate(Math.PI / 4);
            context.fillRect(0, 0, 100, 100);


            context.restore(); //恢复到刚刚保存的状态,保存恢复只能使用一次
            context.save(); //保存了当前context的状态
            context.fillStyle = &quot;rgba(255,0,0,0.2)&quot;;
            //平移 旋转 缩放 1 3 2
            context.translate(100, 100);
            context.rotate(Math.PI / 4);
            context.scale(0.5, 0.5);
            context.fillRect(0, 0, 100, 100);

            context.restore(); //恢复到刚刚保存的状态
            context.save(); //保存了当前context的状态
            context.fillStyle = &quot;rgba(255,0,0,0.3)&quot;;
            //缩放 平移 旋转 2 1 3 
            context.scale(0.5, 0.5);
            context.translate(100, 100);
            context.rotate(Math.PI / 4);
            context.fillRect(0, 0, 100, 100);

            context.restore(); //恢复到刚刚保存的状态
            context.save(); //保存了当前context的状态
            context.fillStyle = &quot;rgba(255,0,0,0.4)&quot;;
            //缩放 旋转 平移  2 3  1 
            context.scale(0.5, 0.5);
            context.rotate(Math.PI / 4);
            context.translate(100, 100);
            context.fillRect(0, 0, 100, 100);

            context.restore(); //恢复到刚刚保存的状态
            context.save(); //保存了当前context的状态
            context.fillStyle = &quot;rgba(255,0,0,0.5)&quot;;
            //旋转 平移 缩放  3 1 2 
            context.rotate(Math.PI / 4);
            context.translate(100, 100);
            context.scale(0.5, 0.5);
            context.fillRect(0, 0, 100, 100);

            context.restore(); //恢复到刚刚保存的状态
            context.save(); //保存了当前context的状态
            context.fillStyle = &quot;rgba(255,0,0,1)&quot;;
            //旋转 缩放 平移   3 2 1 
            context.rotate(Math.PI / 4);
            context.scale(0.5, 0.5);
            context.translate(100, 100);
            context.fillRect(0, 0, 100, 100);

            //实验表明应该移动的是坐标轴
            //实验表明缩放的是坐标轴比例
            //实验表明旋转的是坐标轴
            //综合上述，因此平移 缩放 旋转 三者的顺序不同都将画出不同的结果
        }
</code></pre>

<p>由于（平移，缩放，旋转）和（平移，旋转，缩放）一样</p>

<pre><code> （缩放，选装，平移）和（旋转，缩放，平移）一样
</code></pre>

<p>所以实验结果只能看到“4”中情况，其实是有两种情况被覆盖了</p>

<p>下面给出平移，缩放，旋转先后顺序不同，坐标轴的变化图</p>

                </article>

              </div>
              
              <div class="card-action">
                
              </div>

              
              <div class="pagination-single">
                 
                
                
                <span class="pagination-item next">
                  <a href="https://wuxingtao.github.io/posts/from-hexo-to-hugo/" rel="next">从Hexo迁移到Hugo 及Hugo差别</a>
                  <i class="material-icons">navigate_next</i>
                </span> 
              </div>
              

            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
  <footer class="page-footer">
  <div class="container">
    <div class="inner">
      <div class="wrapper">
        <div class="group group-slink">
          <h5>wuxingtao Blog</h5>
          
            
            
          <ul class='slink'>
             
            <li>
              <a href="https://github.com/wuxingtao" target="_blank" title="Github">
                <svg class='svg-icons svg-icons-github'><use xlink:href='#svg-icons-github'></use></svg>
              </a>
            </li>
            
            <li>
              <a href="https://twitter.com/wuxingtao" target="_blank" title="Twitter">
                <svg class='svg-icons svg-icons-twitter'><use xlink:href='#svg-icons-twitter'></use></svg>
              </a>
            </li>
             
          </ul>
        </div>
        <div class="group group-flink">
          <h5>My Friends</h5>
          <ul>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="footer-copyright">
    <div class="container">
      <div class="inner">Copyleft@wuxingtao</div>
    </div>
  </div>
</footer>

</main>

<script type="text/javascript" async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript" src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/go.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/typescript.min.js"></script>
<script>
  hljs.configure({
    tabReplace: '  '
  })
  hljs.registerLanguage("graphql", function (e) { return { aliases: ["gql"], k: { keyword: "query mutation subscription|10 type interface union scalar fragment|10 enum on ...", literal: "true false null" }, c: [e.HCM, e.QSM, e.NM, { cN: "type", b: "[^\\w][A-Z][a-z]", e: "\\W", eE: !0 }, { cN: "literal", b: "[^\\w][A-Z][A-Z]", e: "\\W", eE: !0 }, { cN: "variable", b: "\\$", e: "\\W", eE: !0 }, { cN: "keyword", b: "[.]{2}", e: "\\." }, { cN: "meta", b: "@", e: "\\W", eE: !0 }], i: /([;<']|BEGIN)/ } });
  hljs.initHighlightingOnLoad();
  
</script>


<script type="text/javascript" src="https://wuxingtao.github.io/js/polyfill.js"></script>
<script type="text/javascript" src="https://wuxingtao.github.io/js/index.js"></script>



</body>

</html>